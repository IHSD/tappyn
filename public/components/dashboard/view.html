<div class=wrapper>
    <div class="modal_actions col-sm-12" ng-show=adding_payment.show>
        <div class=payment_modal>
            <div class="text-center modal_top">
                <div class=close_circle ng-click=close_payment()>x</div>
                <h3><strong>Campaign Payment</strong></h3>
                <h4>{{adding_payment.contest.platform | capitalize}} Campaign</h4></div>
            <div class=modal_bot>
                <div class="row voucher-group" ng-show='voucher.visible == "1"'>
                    <p class=col-xs-12 ng-if=reduction><strong class=pull-left>Voucher Discount</strong><span class=pull-right>-{{reducton | currency}}</span>
                        <form class=form ng-submit=use_voucher()>
                            <div class="col-xs-12 col-sm-7 form-group" style=padding-left:0>
                                <input class=form-control placeholder="Voucher Code" ng-model=voucher_code>
                            </div>
                            <button class="col-xs-12 btn btn-oj col-sm-5" type=submit>Check Voucher</button>
                        </form>
                </div>
                <div ng-show="price != 0.00">
                    <div ng-show=!add_new>
                        <div ng-show="payments.length > 0">
                            <div class=payment-method-container>
                                <div class=row>
                                    <div class="col-xs-12 col-sm-4 col-sm-offset-4 payment-method-card" ng-click=select_current(payment.id) ng-class='{"highlight_payment" : payment.id == passing_method}' ng-repeat="payment in payments">
                                        <h5><img src=public/img/visa-card.gif ng-if='payment.brand == "Visa"'height=20> <img src=public/img/mastercard.gif ng-if='payment.brand == "MasterCard"'height=20> <img src=public/img/american-express.gif ng-if='payment.brand == "American Express"'height=20> <img src=public/img/discover-card.jpg ng-if='payment.brand == "Discover"'height=20>    ********{{payment.last4}}</h5><span><strong>Expires   {{payment.exp_month}}/{{payment.exp_year}}</strong></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="alert alert-warning" ng-show="payments.length < 1">You don't have any saved payment methods</div>
                        <div class=text-right>
                            <button class="btn btn-oj" ng-click=old_payment()>Pay {{price | currency}}</button>
                        </div>
                        <div class=text-center>
                            <button class="btn btn-oj" ng-click="add_new = true">Add Payment Method</button>
                        </div>
                    </div>
                    <div ng-show=add_new>
                        <div class=text-center ng-show="payments.length > 0">
                            <button class="btn btn-oj" ng-click="add_new = false">Use a saved method</button>
                        </div>
                        <form class="row form" id=payment-form method=POST>
                            <div class=payment-empty-card>
                                <div class=card-group>
                                    <input class=form-control placeholder="Enter your Card Number" data-stripe=number size=20>
                                </div>
                                <div class=card-group>
                                    <input class=form-control placeholder=CVC data-stripe=cvc size=4>
                                </div>
                                <div class=card-group>
                                    <select class=form-control data-stripe=exp-month>
                                        <option value=01>01
                                            <option value=02>02
                                                <option value=03>03
                                                    <option value=04>04
                                                        <option value=05>05
                                                            <option value=06>06
                                                                <option value=07>07
                                                                    <option value=08>08
                                                                        <option value=09>09
                                                                            <option value=10>10
                                                                                <option value=11>11
                                                                                    <option value=12>12</select>
                                </div>
                                <div class=card-group>
                                    <select class=form-control data-stripe=exp-year>
                                        <option value=2016>2016
                                            <option value=2017>2017
                                                <option value=2018>2018
                                                    <option value=2019>2019
                                                        <option value=2020>2020
                                                            <option value=2021>2021
                                                                <option value=2022>2022
                                                                    <option value=2023>2023
                                                                        <option value=2024>2024
                                                                            <option value=2025>2025
                                                                                <option value=2026>2026
                                                                                    <option value=2027>2027</select>
                                </div>
                            </div>
                            <input data-stripe=currency type=hidden value=usd>
                            <div class="form-group checkbox">
                                <label class=control-label>
                                    <input ng-model=save_method type=checkbox> Save Method</label>
                                <div class=pull-right data-toggle=buttons>
                                    <label class="btn btn-link" style=color:#ff5e00;padding:0>
                                        <input ng-model=voucher.visible type=radio name=reg value=1>I have a voucher!</label>
                                </div>
                            </div>
                            <div class=text-center>
                                <button class="col-xs-12 btn btn-oj" ng-click=new_payment()>Pay {{price | currency}}</button> <img src=public/img/truste.png class=img-responsive style="max-width:100px;height:auto;margin:10px auto;display:inline-block"></div>
                        </form>
                    </div>
                </div>
                <div class=text-center ng-show="price == 0.00">
                    <h4>No need for payment, this campaign is on us!</h4>
                    <button class="col-xs-12 btn btn-oj" ng-click=voucher_payment()>Continue</button>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-12 modal_actions" ng-show=confirm_winner.show>
        <div class="col-xs-12 col-sm-7 col-lg-4 col-md-5 modal_inner panel">
            <div class=panel-body>
                <div class=close_circle ng-click=close_confirm()>x</div>
                <div class=row>
                    <div class=col-xs-12 style="border-bottom:1px solid #ff5c00;margin-bottom:5px">
                        <h3 class=text-left>Award Winner</h3></div>
                    <p class=text-left>Are you sure you want to choose this ad by {{confirm_winner.submission.owner.first_name}} {{confirm_winner.submission.owner.last_name | firstChar}}. as your winning submission?
                        <div class=contest-box>
                            <div class=contest-image><img ng-src={{confirm_winner.submission.attachment}}></div>
                            <div class="text-left contest-company"><span class=company-name>from {{user.first_name}} • {{confirm_winner.submission.contest.platform | capitalize}}</span></div>
                            <div class="text-left contest-entry">
                                <h3 ng-show=confirm_winner.submission.headline>{{confirm_winner.submission.headline}}</h3>
                                <h4 ng-show=confirm_winner.submission.link_explanation>{{confirm_winner.submission.link_explanation}}<br></h4>
                                <h4 ng-show=confirm_winner.submission.text>{{confirm_winner.submission.text}}</h4>
                                <div class="contest-upvotes disable-click"><span class="glyphicon glyphicon-heart"></span> {{confirm_winner.submission.votes | number}}</div>
                            </div>
                            <div class="text-left contest-winner">
                                <div class=avatar><img src=public/img/avatar.png alt="" ng-src={{confirm_winner.avatar_url}}></div>
                                <h5 class=winner-name>{{confirm_winner.submission.owner.first_name}} {{confirm_winner.submission.owner.last_name | firstChar}}.</h5><span class=contest-ctr ng-show=confirm_winner.submission.ctr>{{confirm_winner.submission.ctr}}%</span></div>
                            <div class="text-center contest-winner-select">
                                <button class="btn btn-oj" ng-click=choose_winner(confirm_winner.submission.id)>Confirm Winner</button> <a ng-click=close_confirm() style=color:#ff5c00>Cancel</a></div>
                        </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class=container>
    <div class=row><img src={{contest.company.logo_url}} ng-if=contest.company.logo_url>
        <div class="row contest-box" ng-if='view == "table"' style=margin-top:5px>
            <div class=col-xs-12 ng-if='user.type == "company"'>
                <div class=col-xs-12></div>
                <div class=col-xs-12>
                    <h2 class=text-center>{{user.first_name | capitalize}}</h2></div>
                <div class="col-xs-6 col-sm-2 col-sm-offset-1" ng-click='set_type_dash("")' ng-class='{"dash-oj" : type == "", "dash-black" : type != ""}'>
                    <h3 class=text-center>All</h3></div>
                <div class="col-xs-6 col-sm-2 dash-bordered" ng-click='set_type_dash("active")' ng-class='{"dash-oj" : type == "active", "dash-black" : type != "active"}'>
                    <h3 class=text-center>Active</h3></div>
                <div class="col-xs-6 col-sm-2 dash-bordered" ng-click='set_type_dash("draft")' ng-class='{"dash-oj" : type == "draft", "dash-black" : type != "draft"}'>
                    <h3 class=text-center>Drafts</h3></div>
                <div class="col-xs-6 col-sm-2 dash-bordered" ng-click='set_type_dash("needs_winner")' ng-class='{"dash-oj" : type == "needs_winner", "dash-black" : type != "needs_winner"}'>
                    <h3 class=text-center>Need Winner</h3></div>
                <div class="col-xs-6 col-sm-2" ng-click='set_type_dash("completed")' ng-class='{"dash-oj" : type == "completed", "dash-black" : type != "completed"}'>
                    <h3 class=text-center>Completed</h3></div>
            </div>
            <div class="col-xs-12 col-sm-10 col-sm-offset-1" ng-if='user.type == "member"' style=margin-top:10px>
                <div class=col-xs-12><a href=/profile class="btn btn-oj pull-right" style=margin-right:5px;margin-bottom:10px>Edit Profile</a></div>
                <div class=col-xs-12>
                    <h2 class=text-center>{{user.first_name | capitalize}}</h2></div>
                <div class=col-xs-12 style=margin-bottom:-25px>
                    <hr style=border-color:#eee>
                </div>
                <div class="col-sm-4 col-xs-6" ng-click='grab_dash("all")' ng-class='{"dash-black" : type != "all", "dash-oj" : type == "all"}'>
                    <h3 class=text-center style=margin-bottom:-20px>{{totals.submissions}}</h3>
                    <h3 class=text-center style=margin-bottom:5px>Ads</h3></div>
                <div class="col-sm-4 col-xs-6" ng-click='grab_dash("upvotes")' ng-class='{"dash-black" : type != "upvotes", "dash-oj" : type == "upvotes"}'>
                    <h3 class=text-center style=margin-bottom:-20px>{{totals.upvotes}}</h3>
                    <h3 class=text-center style=margin-bottom:5px>Likes</h3></div>
                <div class="col-sm-4 col-xs-6" ng-click='grab_dash("winning")' ng-class='{"dash-black" : type != "winning", "dash-oj" : type == "winning"}'>
                    <h3 class=text-center style=margin-bottom:-20px>{{totals.won}}</h3>
                    <h3 class=text-center style=margin-bottom:5px>Tapped</h3></div>
            </div>
        </div>

        <div class="modal fade" id="myModaldash" tabindex="-1" role="dialog" aria-labelledby="myModalLabeldash" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="border-bottom: 1px solid #FF5C00;">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title text-center" id="myModalLabeldash">This is your ad's CTR.</h4>
                    </div>
                    <div class="modal-body text-center">
                        <p style="margin:0 0 0 0">The <strong>Click Through Rate</strong> (CTR) is a measure of how relatable an ad is to a particular audience. We test businesses' favorite ads and we show them CTR of each. This is one of the primary ways they decide which ads to Tapp.
                            (The higher the better!)
                            <br>
                        </p>
                    </div>
                    <div class="modal-footer text-right">
                        <button class="btn btn-primary" onclick="location.href = 'https://tappyn.com/guide';" style="background-color:#FF5C00;border-color:#FF5C00;">How do I write a great copy?</button>
                    </div>
                </div>
            </div>
        </div>

        <div class='content-padding'>
            <div ng-if='user.type == "member"'>
                <div class="col-sm-4 hidden-xs">
                    <div class="row contest-box" ng-if=first_third($index) ng-repeat="submission in dash.submissions">
                        <div ng-include src="'templates/submits/dashsubmit.html'"></div>
                    </div>
                </div>
                <div class="col-sm-4 hidden-xs">
                    <div class="row contest-box" ng-if=second_third($index) ng-repeat="submission in dash.submissions">
                        <div ng-include src="'templates/submits/dashsubmit.html'"></div>
                    </div>
                </div>
                <div class="col-sm-4 hidden-xs">
                    <div class="row contest-box" ng-if=third_third($index) ng-repeat="submission in dash.submissions">
                        <div ng-include src="'templates/submits/dashsubmit.html'"></div>
                    </div>
                </div>
                <div class="col-xs-12 visible-xs">
                    <div class="row contest-box" ng-repeat="submission in dash.submissions">
                        <div ng-include src="'templates/submits/dashsubmit.html'"></div>
                    </div>
                </div>
            </div>
            <div ng-if='user.type == "company"'>
                <table class="text-center table table-hover" ng-show='view == "table"' style=border-radius:5px;background:#fff>
                    <thead>
                        <tr>
                            <td>Actions
                                <td ng-click='predicate="platform";reverse=!reverse' style=cursor:pointer>Campaign
                                    <td ng-click='predicate="status";reverse=!reverse' style=cursor:pointer>Status
                                        <td ng-click='predicate="submission_count";reverse=!reverse' style=cursor:pointer>Ads
                                            <td ng-click='predicate="views";reverse=!reverse' style=cursor:pointer>Views
                                                <td ng-click='predicate="votes";reverse=!reverse' style=cursor:pointer>Upvotes
                                                    <td ng-click='predicate="website_clicks";reverse=!reverse' style=cursor:pointer>Site Clicks
                                                        <td ng-click='predicate="facebok_clicks";reverse=!reverse' style=cursor:pointer>Facebook Clicks
                                                            <td ng-click='predicate="twitter_clicks";reverse=!reverse' style=cursor:pointer>Twitter Clicks</thead>
                    <tr ng-repeat="contest in dash.contests | filter : {status : type} | orderBy : predicate : reverse">
                        <td>
                            <div uib-dropdown><a href class="btn btn-outliner btn-sm" uib-dropdown-toggle><span class="glyphicon glyphicon-cog"></span></a>
                                <ul role=menu uib-dropdown-menu>
                                    <li role=menuitem><a href=/contest/{{contest.id}}>View Campaign</a>
                                        <li role=menuitem ng-if='contest.paid == "0"'><a href ng-click=open_payment(contest)>Pay for Campaign</a>
                                            <li role=menuitem><a href=/edit/{{contest.id}}>Edit Campaign</a>
                                                <li role=menuitem ng-if='contest.status == "needs_winner"'><a ng-click=choosing_winner(contest)>Choose winner</a>
                                                    <li role=menuitem ng-if='contest.status == "completed"'><a ng-click=view_pcp(contest.id)>View Winner</a></ul>
                            </div>
                            <td><a href=/contest/{{contest.id}} style=color:#ff5c00>{{contest.platform | capitalize}} - {{contest.objective | capUnderscore}}</a>
                                <br><small><span ng-if='contest.status != "draft"'>{{contest.start_time | dashDate}}</span> <span ng-if='contest.status == "draft"'>No start : Draft</span> - <span ng-if='contest.status != "draft"'>{{contest.stop_time | dashDate}}</span> <span ng-if='contest.status == "draft"'>No stop : Draft</span></small>
                                <td>{{contest.status | capUnderscore}}
                                    <td>{{contest.submission_count | number}}/{{contest.submission_limit}}
                                        <td>{{contest.views | number}}
                                            <td>{{contest.votes | number}}
                                                <td>{{contest.website_clicks | number}}
                                                    <td>{{contest.facebook_clicks | number}}
                                                        <td>{{contest.twitter_clicks | number}}</table>
                <div ng-show='view == "winner"'>
                    <div class=col-xs-12>
                        <button class="btn btn-oj" ng-click=back_table() style=margin-bottom:10px;margin-top:10px>Back</button>
                    </div>
                    <div class=col-xs-12>
                        <h3 class=text-center>Choose a winner</h3></div>
                    <div class="col-sm-4 hidden-xs">
                        <div class="row contest-box" ng-if=first_third($index) ng-repeat="submission in submissions">
                            <div ng-include src="'templates/submits/companysubmits-new.html'"></div>
                        </div>
                    </div>
                    <div class="col-sm-4 hidden-xs">
                        <div class="row contest-box" ng-if=second_third($index) ng-repeat="submission in submissions">
                            <div ng-include src="'templates/submits/companysubmits-new.html'"></div>
                        </div>
                    </div>
                    <div class="col-sm-4 hidden-xs">
                        <div class="row contest-box" ng-if=third_third($index) ng-repeat="submission in submissions">
                            <div ng-include src="'templates/submits/companysubmits-new.html'"></div>
                        </div>
                    </div>
                    <div class="col-xs-12 visible-xs">
                        <div class="row contest-box" ng-repeat="submission in submissions">
                            <div ng-include src="'templates/submits/companysubmits-new.html'"></div>
                        </div>
                    </div>
                </div>
                <div ng-show='view == "pcp"'>
                    <div class="col-xs-12 col-sm-8 col-sm-offset-2">
                        <button class="btn btn-oj" ng-click=back_table() style=margin-bottom:10px;margin-top:10px>Back</button>
                        <div class="row contest-box">
                            <div class="col-xs-12 col-sm-6 submission-text" style="border:1px solid #333;border-radius:7px;padding:5px">
                                <div class="col-xs-12 text-left"><span style=color:#ff5c00>{{user.first_name}}</span> • {{winner.contest.platform | capitalize}}</div>
                                <div class=col-xs-12 style=margin-top:15px>
                                    <div class=contest-content>
                                        <h4 ng-show=winner.winner.link_explanation style=color:#333>{{winner.winner.link_explanation}}<br></h4>
                                        <h4 ng-show=winner.winner.text style=color:#333>{{winner.winner.text}}</h4></div>
                                </div>
                                <div class=col-xs-12 style=margin-bottom:10px><img ng-src={{winner.winner.attachment}} style=max-width:100%></div>
                                <div class=col-xs-12>
                                    <h3 class=text-left style=color:#ff5c00 ng-show=winner.winner.headline>{{winner.winner.headline}}</h3></div>
                                <div class=col-xs-12>
                                    <h5 class=text-left>- {{winner.winner.first_name}} {{winner.winner.last_name | firstChar}}.</h5></div>
                                <div class="col-xs-12 submish-hovering text-center" style="border-top:solid #333 1px;padding:0">{{winner.winner.votes | number}} <span class="glyphicon glyphicon-thumbs-up"></span> Upvote<span ng-if="winner.votes != 1">s</span></div>
                            </div>
                            <div class="col-xs-12 col-sm-6">
                                <h4>{{winner.contest.platform | capitalize}} - {{winner.contest.objective | capUnderscore}} - {{winner.contest.min_age}} to {{winner.contest.max_age}} <span ng-switch on=winner.contest.gender><span ng-switch-when=1>Men</span> <span ng-switch-when=2>Women</span> <span ng-switch-default>Men and Women</span></span></h4>
                                <h5>Ended {{contest.stop_time | dashDate}}</h5>
                                <div class=col-xs-12><a href={{winner.winner.attachment}} class="btn btn-oj pull-right col-xs-8" style=margin-bottom:10px download=winner.jpg ng-if=winner.winner.attachment>Download Image</a></div>
                                <div class=col-xs-12 ng-switch on=winner.contest.platform><a href=https://business.facebook.com class="btn btn-oj pull-right col-xs-8" ng-switch-when=facebook target=_blank>Launch Facebook Campaign</a> <a href=https://business.facebook.com class="btn btn-oj pull-right col-xs-8"
                                        ng-switch-when=instagram target=_blank>Launch Instagram Campaign</a> <a href=https://ads.twitter.com class="btn btn-oj pull-right col-xs-8" ng-switch-when=twitter target=_blank>Launch Twitter Campaign</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type='text/javascript' src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    $('#myModalnew').on('show.bs.modal', function() {
        $('.container').addClass('blur');
    })

    $('#myModalnew').on('hide.bs.modal', function() {
        $('.container').removeClass('blur');
    })
</script>
<style>
    .blur {
        -webkit-filter: blur(5px) grayscale(20%);
    }

    .modal-backdrop {
        background-color: #fff;
        opacity: 0.5;
    }

    @media (min-width: 768px) .modal-content {
        -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, .5);
        box-shadow: 0 1px 5px rgba(0, 0, 0, .5);
    }

    .modal-header {
        border-left: 1px solid #ccc;
        border-top: 1px solid #ccc;
        border-right: 1px solid #ccc;
        border-top-left-radius: 6px;
        border-top-right-radius: 6px;
    }

    .modal-body {
      border-left: 1px solid #ccc;
      border-right: 1px solid #ccc;
      padding-top: 10px;
      padding-right: 10px;
      padding-left: 10px;
    }

    .modal-content {
        background-color: #f4f7f9;
        border: 0;
        border-radius: 2px;
        -webkit-box-shadow: none;
        box-shadow: none;
    }

    .modal-dialog {
        color: #526880;
    }

    .modal-footer {
       border-top: none;
       border-left: 1px solid #ccc;
       border-right: 1px solid #ccc;
       border-bottom-left-radius: 6px;
       border-bottom-right-radius: 6px;
       border-bottom: 1px solid #ccc;
       padding-bottom: 10px;
       padding-right:10px;
       padding-top:30px;
    }
</style>
